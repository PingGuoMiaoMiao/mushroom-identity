## å¤èµ›ä»“åº“æ ¼å¼

```
â”œâ”€â”€ src/ #é¡¹ç›®ä»£ç 
â”œâ”€â”€ doc/ #æ–‡æ¡£
â”œâ”€â”€ slide/ #PPT
â”œâ”€â”€ video/ #æ¼”ç¤ºè§†é¢‘
â”œâ”€â”€ run.sh #å¯åŠ¨è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ README.md #è¯´æ˜å¯åŠ¨æµç¨‹
```

**é¡¹ç›®ä»£ç æ ¼å¼**

```
src/
â”œâ”€â”€ main.py          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ process.py       # æ ¸å¿ƒå¤„ç†é€»è¾‘
â”œâ”€â”€ models/
â”‚   â””â”€â”€ best.onnx    # æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ yolov5_env       # è™šæ‹Ÿä¾èµ–
â”œâ”€â”€ images/          # è¾“å…¥å›¾ç‰‡
â”œâ”€â”€ requirement.txt  # ä¾èµ–
â””â”€â”€ outputs/         # è¾“å‡ºç›®å½•
```

#### **â€‹1. ç¯å¢ƒå‡†å¤‡â€‹**

ç¡®ä¿å·²å®‰è£…Â `Python 3.8+`Â å’ŒÂ `pip`ï¼Œå¹¶è¿›å…¥é¡¹ç›®ç›®å½•ï¼š

```
cd mushroom-identity/src
```
# 
#### â€‹**â€‹2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒâ€‹**â€‹

```
python -m venv yolov5_env 
source yolov5_env/bin/activate  
```
âœ… â€‹**â€‹éªŒè¯æ¿€æ´»æˆåŠŸâ€‹**â€‹ï¼šå‘½ä»¤è¡Œå‰ç¼€åº”æ˜¾ç¤ºÂ `(yolov5_env)`
### æ–¹æ³•1ï¼šé€šè¿‡Â `pip`Â é€ä¸ªå®‰è£…ï¼ˆæ¨èï¼‰

`# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåæ‰§è¡Œï¼ˆç¡®ä¿åœ¨yolov5_envç¯å¢ƒä¸‹) 
```
pip install onnx onnxruntime opencv-python numpy
```
### æ–¹æ³•2ï¼šé€šè¿‡Â `requirements.txt`Â æ‰¹é‡å®‰è£…

1. åœ¨é¡¹ç›®ç›®å½•ï¼ˆå¦‚Â `src/`ï¼‰ä¸‹åˆ›å»ºÂ `requirements.txt`Â æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
```
onnxruntime>=1.15.0
opencv-python>=4.7.0
numpy>=1.23.0 
```
   
2. æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š
```
pip install -r requirements.txt
```
éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ
```
 pip show onnxruntime opencv-python numpy # æ£€æŸ¥å·²å®‰è£…çš„ç‰ˆæœ¬
```

#### â€‹**â€‹3. æ£€æŸ¥ä¾èµ–â€‹**â€‹

```
pip list | grep -E "onnxruntime|opencv-python|numpy"
```

ğŸ”§ â€‹**â€‹è‹¥ç¼ºå°‘ä¾èµ–â€‹**â€‹ï¼Œæ‰§è¡Œï¼š

```
pip install -r requirements.txt
```

#### â€‹**â€‹4. è¿è¡Œç¨‹åºâ€‹**

| è¿è¡Œç›¸å…³å‚æ•°       | ä½œç”¨          |
| ------------ | ----------- |
| --output     | è¾“å‡ºè·¯å¾„        |
| --model      | è˜‘è‡æ£€æµ‹æ¨¡å‹è·¯å¾„    |
| --folder     | è¾“å…¥è˜‘è‡å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„ |
| --confidence | æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼     |
| --image      | è¾“å…¥è˜‘è‡å›¾ç‰‡è·¯å¾„    |

| ä¼˜åŒ–ç›¸å…³çš„å‚æ•°     | ä½œç”¨       |
| ----------- | -------- |
| --optimize  | ä¼˜åŒ–ONNXæ¨¡å‹ |
| --quantize  | é‡åŒ–ONNXæ¨¡å‹ |
| --benchmark | è¿è¡ŒåŸºå‡†æµ‹è¯•   |


```
python main.py --folder images --output output --model model/best.onnx
```

âœ… â€‹**â€‹é¢„æœŸè¾“å‡ºâ€‹**â€‹ï¼š

- ç»ˆç«¯æ‰“å°æ¨ç†æ—¥å¿—ï¼ˆå¦‚Â `Detection completed!`ï¼‰
- ç»“æœå›¾ç‰‡ä¿å­˜è‡³Â `./output/`

#### â€‹**â€‹5. é€€å‡ºè™šæ‹Ÿç¯å¢ƒâ€‹**â€‹

```
deactivate
```

---

### â€‹**â€‹ä¸€é”®å¯åŠ¨â€‹**(æš‚æœªå®ç°)â€‹

è‹¥å·²é…ç½®Â `run.sh`ï¼Œå¯ç›´æ¥æ‰§è¡Œï¼š

`chmod +x run.sh  # æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆä»…é¦–æ¬¡éœ€è¦ï¼‰ ./run.sh         # è‡ªåŠ¨å®Œæˆç¯å¢ƒæ¿€æ´»å’Œè¿è¡Œ`

â€‹**â€‹`run.sh`Â ç¤ºä¾‹å†…å®¹â€‹**â€‹ï¼š

```
#!/bin/bash
cd src 
source yolov5_env/bin/activate
python main.py --folder images --output output --model model/best.onnx 
deactivate
```
